<html>
  <head>
    <title>EtherPot</title>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <style>
    	body{padding-top: 60px}
    	[ng-cloak]{display: none}
    	#hero{text-align: center;margin-bottom: 20px}
    	#pot{font-size: 48px;}
      #tabs{margin-bottom: 20px}
      iframe.twitter-follow-button{margin-top: 10px;}
    </style>
  </head>
  <body ng-app="app">
  	<nav class="navbar navbar-inverse navbar-top navbar-fixed-top">
			  <div class="container">
			    <div class="navbar-header">
            <a class="navbar-brand">EtherPot</a>
          </div>
          <ul class="navbar-nav nav">
            <li>
              <a href="https://twitter.com/etherpot" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @etherpot</a>
            </li>
          </ul>
          <div class="navbar-form navbar-right">
            <div class="input-group">
              <div class="input-group-addon">Round #</div>
                <input type="number" class="form-control" ng-model="roundIndex" ng-model-options="{debounce:300}" ng-disabled="isLoading">
              </div>
            </div>
          </div>
			  </div>
			</nav>
    <div class="container">
    	<div class="alert alert-warning text-center">
    		EtherPot is still in Beta. Use at your own risk.
    	</div>
      <div class="alert alert-danger text-center" ng-cloak ng-if="!isLoading && lotto && roundIndex<lotto.roundIndex">
        Round #{{roundIndex}} has ended. Go to the <a href="/">current round</a>
      </div>
      <div class="alert alert-danger text-center" ng-cloak ng-if="!isLoading && lotto && roundIndex>lotto.roundIndex">
        Round #{{roundIndex}} hasn't started yet. Go to the <a href="/">current round</a>
      </div>
      <div class="alert alert-info text-center" ng-if="isLoading">
        Loading...
      </div>
      <div ng-show="!isLoading" ng-cloak>
      	<div id="hero">
      		<div id="pot" ng-if="round" ng-cloak>{{round.pot/1000000000000000000}} Ether</div>
      		<div id="remaining" ng-if="lotto && roundIndex==lotto.roundIndex" ng-cloak>
      			There are {{blocksLeft}} Blocks ( ~
  	    			<span ng-if="timeLeft.hours>0">{{timeLeft.hours}} Hours,</span>
  	    			<span ng-if="timeLeft.minutes>0">{{timeLeft.minutes}} Minutes,</span>
  	    			{{timeLeft.seconds}} Seconds
  	    		) until this round ends
      		</div>
          <div id="subpots" ng-if="round" ng-cloak>
            {{round.subpotsCount}} subpots worth ~{{round.subpot/1000000000000000000 | number:2}} Ether each
          </div>
        </div>
        <div class="alert alert-info text-center" ng-if="round && round.tickets.length==0" ng-cloak>
            No one has bought any tickets yet this round!
          </div>
        <div ng-show="round.tickets.length>0">
          <ul class="nav nav-tabs" id="tabs">
            <li role="presentation" ng-click="tab='tickets'" ng-class="{active:(tab=='tickets')}"><a href="#">Tickets</a></li>
            <li role="presentation" ng-click="tab='subpots'" ng-class="{active:(tab=='subpots')}"><a href="#">Subpots</a></li>
          </ul>
          <div ng-if="tab=='tickets'">
        		<table class="table">
              <th>
                <td>Address</td>
                <td># of Tickets</td>
                <td>% of Tickets</td>
              </th>
    	    		<tr ng-repeat="(ticket,count) in round.ticketsByAddress">
    	    			<td>{{$index+1}}.</td>
                <td>{{ticket}}</td>
                <td>{{count}}</td>
                <td>{{100*count/round.tickets.length | number:2}}%</td>
    	    		</tr>
        		</table>
          </div>
          <div ng-if="tab=='subpots'">
            <table class="table">
              <th>
                <td>Decision Block #</td>
                <td>Decision Block Hash</td>
                <td>Winner</td>
                <td>Cashed Out?</td>
              </th>
              <tr ng-repeat="subpot in round.subpots">
                <td>{{$index}}.</td>
                <td>{{subpot.decisionBlockNumber?subpot.decisionBlockNumber:'...'}}</td>
                <td>{{subpot.decisionBlockHash?subpot.decisionBlockHash:'...'}}</td>
                <td>{{subpot.winner?subpot.winner:'...'}}</td>
                <td>{{subpot.isCashed?'üëç':'Nope'}}</td>
              </tr>
            </table>
          </div>
      	</div>
      </div>
      <script src="/bower_components/angular/angular.min.js"></script>
      <script src="/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
      <script src="/index.js"></script>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-66637104-1', 'auto');
        ga('send', 'pageview');

      </script>
  </body>
</html>